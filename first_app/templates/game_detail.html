{% extends 'base.html' %}

{% block content%}
{% load static %}
<title>{{ game.name }}</title>
  <main class="main">

    <div class="page-title" data-aos="fade">
      <div class="heading">
        <div class="container">
          <div class="row d-flex justify-content-center text-center">
            <div class="col-lg-8">
              <h1>{{ game.name }}</h1>
            </div>
          </div>
        </div>
      </div>
    </div>


    <section id="about" class="about section">

      <div class="container" data-aos="fade-up" data-aos-delay="100">
        <div class="row gy-4 justify-content-center">

          <div class="col-lg-5">
            <div class="ratio ratio-16x9">
              {% if game.trailer_url %}
              <p>Game trailer</p>
              <video controls poster="{% static 'img/video-poster.jpg' %}" style="border-radius: 10px;">
                <source src="{{ game.trailer_url }}" type="video/mp4">
              </video>
              {% else %}
              <img src="{{ game.image }}" class="img-fluid rounded shadow" alt="Game Image">
              {% endif %}
            </div>
          </div>

          <div class="col-lg-5">
            <img src="{{ game.screenshots }}" class="img-fluid rounded shadow" alt="Game Screenshot">
          </div>

          <div class="col-lg-10 content">
            <h2 class="mb-3">{{ game.genres }}</h2>
            <div class="row">
              <div class="col-lg-6">
                <ul>
                  <li><i class="bi bi-chevron-right"></i> <strong>Developers:</strong> <span>{{ game.developers }}</span></li>
                </ul>
              </div>
              <div class="col-lg-6">
                <ul>
                  <li><i class="bi bi-chevron-right"></i> <strong>Your rating:</strong> <span>{{ value }}</span></li>
                  <li><i class="bi bi-chevron-right"></i> <strong>User's average:</strong> <span>{{ average }}</span></li>
                </ul>
              </div>
            </div>
            <p class="py-3">
              {{ game.description }}
            </p>
          </div>
        </div>
      </div>
        {% if request.user.is_authenticated %}
          <div class="d-flex justify-content-center text-center">
            <form class="d-flex" method="POST" action="{% url 'game' game.id%}">
              {% csrf_token %}
              <button type="submit" class="button-85">Rate this game</button>
            </form>
          </div>
        {% else %}
          <div class="d-flex justify-content-center text-center">
            <a href="{% url 'register' %}" class="button-85">Register now</a>
          </div>
        {% endif %}

    </section>

  </main>
{% endblock %}